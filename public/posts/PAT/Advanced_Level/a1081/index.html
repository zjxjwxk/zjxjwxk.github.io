<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PAT甲级 1081 Rational Sum (20分) | Xinkang&#39;s Blog</title>
<meta name="keywords" content="PAT, 数学问题">
<meta name="description" content="Given N rational numbers in the form numerator/denominator, you are supposed to calculate their sum.
Input Specification:
Each input file contains one test case. Each case starts with a positive integer N (≤100), followed in the next line N rational numbers a1/b1 a2/b2 ... where all the numerators and denominators are in the range of long int. If there is a negative number, then the sign must appear in front of the numerator.">
<meta name="author" content="">
<link rel="canonical" href="https://zjxjwxk.github.io/posts/pat/advanced_level/a1081/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://zjxjwxk.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://zjxjwxk.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://zjxjwxk.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://zjxjwxk.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://zjxjwxk.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://zjxjwxk.github.io/posts/pat/advanced_level/a1081/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://zjxjwxk.github.io/posts/pat/advanced_level/a1081/">
  <meta property="og:site_name" content="Xinkang&#39;s Blog">
  <meta property="og:title" content="PAT甲级 1081 Rational Sum (20分)">
  <meta property="og:description" content="Given N rational numbers in the form numerator/denominator, you are supposed to calculate their sum.
Input Specification: Each input file contains one test case. Each case starts with a positive integer N (≤100), followed in the next line N rational numbers a1/b1 a2/b2 ... where all the numerators and denominators are in the range of long int. If there is a negative number, then the sign must appear in front of the numerator.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-04-01T16:29:00+00:00">
    <meta property="article:modified_time" content="2020-04-01T16:29:00+00:00">
    <meta property="article:tag" content="PAT">
    <meta property="article:tag" content="数学问题">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PAT甲级 1081 Rational Sum (20分)">
<meta name="twitter:description" content="Given N rational numbers in the form numerator/denominator, you are supposed to calculate their sum.
Input Specification:
Each input file contains one test case. Each case starts with a positive integer N (≤100), followed in the next line N rational numbers a1/b1 a2/b2 ... where all the numerators and denominators are in the range of long int. If there is a negative number, then the sign must appear in front of the numerator.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://zjxjwxk.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "PAT甲级 1081 Rational Sum (20分)",
      "item": "https://zjxjwxk.github.io/posts/pat/advanced_level/a1081/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "PAT甲级 1081 Rational Sum (20分)",
  "name": "PAT甲级 1081 Rational Sum (20分)",
  "description": "Given N rational numbers in the form numerator/denominator, you are supposed to calculate their sum.\nInput Specification: Each input file contains one test case. Each case starts with a positive integer N (≤100), followed in the next line N rational numbers a1/b1 a2/b2 ... where all the numerators and denominators are in the range of long int. If there is a negative number, then the sign must appear in front of the numerator.\n",
  "keywords": [
    "PAT", "数学问题"
  ],
  "articleBody": "Given N rational numbers in the form numerator/denominator, you are supposed to calculate their sum.\nInput Specification: Each input file contains one test case. Each case starts with a positive integer N (≤100), followed in the next line N rational numbers a1/b1 a2/b2 ... where all the numerators and denominators are in the range of long int. If there is a negative number, then the sign must appear in front of the numerator.\nOutput Specification: For each test case, output the sum in the simplest form integer numerator/denominator where integer is the integer part of the sum, numerator \u003c denominator, and the numerator and the denominator have no common factor. You must output only the fractional part if the integer part is 0.\nSample Input 1: 5 2/5 4/15 1/30 -2/60 8/3 Sample Output 1: 3 1/3 Sample Input 2: 2 4/3 2/3 Sample Output 2: 2 Sample Input 3: 3 1/3 -1/6 1/8 Sample Output 3: 7/24 注意点 数据范围为 int，但是两个分母相乘时，可能超出 int，最大可以达到 long long，所以如果使用 int，就会溢出，得到“答案错误” 必须在每一步加法后都进行约分，如果等全部加完后才约分，则会溢出 #include #include using namespace std; struct Num { long long a, b; } temp, ans; long long gcd(long long a, long long b) { if (b == 0) { return a; } else { return gcd(b, a % b); } } void simplify(Num \u0026n) { if (n.b \u003c 0) { n.a = -n.a; n.b = -n.b; } if (n.a == 0) { n.b = 1; } else { int d = gcd(abs(n.a), abs(n.b)); n.a /= d; n.b /= d; } } Num add(Num \u0026n1, Num \u0026n2) { Num ret; ret.a = n1.a * n2.b + n2.a * n1.b; ret.b = n1.b * n2.b; simplify(ret); return ret; } int main() { int n; scanf(\"%d %lld/%lld\", \u0026n, \u0026ans.a, \u0026ans.b); simplify(ans); for (int i = 1; i \u003c n; i++) { scanf(\"%lld/%lld\", \u0026temp.a, \u0026temp.b); ans = add(ans, temp); } if (ans.b == 1) { printf(\"%lld\", ans.a); } else if (ans.a \u003e ans.b) { printf(\"%lld %lld/%lld\", ans.a / ans.b, ans.a % ans.b, ans.b); } else { printf(\"%lld/%lld\", ans.a, ans.b); } return 0; } ",
  "wordCount" : "337",
  "inLanguage": "en",
  "datePublished": "2020-04-01T16:29:00Z",
  "dateModified": "2020-04-01T16:29:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://zjxjwxk.github.io/posts/pat/advanced_level/a1081/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Xinkang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://zjxjwxk.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://zjxjwxk.github.io/" accesskey="h" title="Xinkang&#39;s Blog (Alt + H)">Xinkang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://zjxjwxk.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://zjxjwxk.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://zjxjwxk.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://zjxjwxk.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      PAT甲级 1081 Rational Sum (20分)
    </h1>
    <div class="post-meta"><span title='2020-04-01 16:29:00 +0000 UTC'>April 1, 2020</span>

</div>
  </header> 
  <div class="post-content"><p>Given <em>N</em> rational numbers in the form <code>numerator/denominator</code>, you are supposed to calculate their sum.</p>
<h1 id="input-specification">Input Specification:<a hidden class="anchor" aria-hidden="true" href="#input-specification">#</a></h1>
<p>Each input file contains one test case. Each case starts with a positive integer <em>N</em> (≤100), followed in the next line <em>N</em> rational numbers <code>a1/b1 a2/b2 ...</code> where all the numerators and denominators are in the range of <strong>long int</strong>. If there is a negative number, then the sign must appear in front of the numerator.</p>
<h1 id="output-specification">Output Specification:<a hidden class="anchor" aria-hidden="true" href="#output-specification">#</a></h1>
<p>For each test case, output the sum in the simplest form <code>integer numerator/denominator</code> where <code>integer</code> is the integer part of the sum, <code>numerator</code> &lt; <code>denominator</code>, and the numerator and the denominator have no common factor. You must output only the fractional part if the integer part is 0.</p>
<h1 id="sample-input-1">Sample Input 1:<a hidden class="anchor" aria-hidden="true" href="#sample-input-1">#</a></h1>
<pre tabindex="0"><code class="language-in" data-lang="in">5
2/5 4/15 1/30 -2/60 8/3
</code></pre><h1 id="sample-output-1">Sample Output 1:<a hidden class="anchor" aria-hidden="true" href="#sample-output-1">#</a></h1>
<pre tabindex="0"><code class="language-out" data-lang="out">3 1/3
</code></pre><h1 id="sample-input-2">Sample Input 2:<a hidden class="anchor" aria-hidden="true" href="#sample-input-2">#</a></h1>
<pre tabindex="0"><code class="language-in" data-lang="in">2
4/3 2/3
</code></pre><h1 id="sample-output-2">Sample Output 2:<a hidden class="anchor" aria-hidden="true" href="#sample-output-2">#</a></h1>
<pre tabindex="0"><code class="language-out" data-lang="out">2
</code></pre><h1 id="sample-input-3">Sample Input 3:<a hidden class="anchor" aria-hidden="true" href="#sample-input-3">#</a></h1>
<pre tabindex="0"><code class="language-in" data-lang="in">3
1/3 -1/6 1/8
</code></pre><h1 id="sample-output-3">Sample Output 3:<a hidden class="anchor" aria-hidden="true" href="#sample-output-3">#</a></h1>
<pre tabindex="0"><code class="language-out" data-lang="out">7/24
</code></pre><h1 id="注意点">注意点<a hidden class="anchor" aria-hidden="true" href="#注意点">#</a></h1>
<ul>
<li>数据范围为 int，但是两个分母相乘时，可能超出 int，最大可以达到 long long，所以如果使用 int，就会溢出，得到“答案错误”</li>
<li>必须在每一步加法后都进行约分，如果等全部加完后才约分，则会溢出</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdio&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;algorithm&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Num</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> a, b;
</span></span><span style="display:flex;"><span>} temp, ans;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">gcd</span>(<span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> a, <span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (b <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> gcd(b, a <span style="color:#f92672">%</span> b);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">simplify</span>(Num <span style="color:#f92672">&amp;</span>n) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (n.b <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        n.a <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>n.a;
</span></span><span style="display:flex;"><span>        n.b <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>n.b;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (n.a <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        n.b <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> d <span style="color:#f92672">=</span> gcd(abs(n.a), abs(n.b));
</span></span><span style="display:flex;"><span>        n.a <span style="color:#f92672">/=</span> d;
</span></span><span style="display:flex;"><span>        n.b <span style="color:#f92672">/=</span> d;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Num <span style="color:#a6e22e">add</span>(Num <span style="color:#f92672">&amp;</span>n1, Num <span style="color:#f92672">&amp;</span>n2) {
</span></span><span style="display:flex;"><span>    Num ret;
</span></span><span style="display:flex;"><span>    ret.a <span style="color:#f92672">=</span> n1.a <span style="color:#f92672">*</span> n2.b <span style="color:#f92672">+</span> n2.a <span style="color:#f92672">*</span> n1.b;
</span></span><span style="display:flex;"><span>    ret.b <span style="color:#f92672">=</span> n1.b <span style="color:#f92672">*</span> n2.b;
</span></span><span style="display:flex;"><span>    simplify(ret);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> ret;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> n;
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#e6db74">&#34;%d %lld/%lld&#34;</span>, <span style="color:#f92672">&amp;</span>n, <span style="color:#f92672">&amp;</span>ans.a, <span style="color:#f92672">&amp;</span>ans.b);
</span></span><span style="display:flex;"><span>    simplify(ans);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#e6db74">&#34;%lld/%lld&#34;</span>, <span style="color:#f92672">&amp;</span>temp.a, <span style="color:#f92672">&amp;</span>temp.b);
</span></span><span style="display:flex;"><span>        ans <span style="color:#f92672">=</span> add(ans, temp);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (ans.b <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        printf(<span style="color:#e6db74">&#34;%lld&#34;</span>, ans.a);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (ans.a <span style="color:#f92672">&gt;</span> ans.b) {
</span></span><span style="display:flex;"><span>        printf(<span style="color:#e6db74">&#34;%lld %lld/%lld&#34;</span>, ans.a <span style="color:#f92672">/</span> ans.b, ans.a <span style="color:#f92672">%</span> ans.b, ans.b);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        printf(<span style="color:#e6db74">&#34;%lld/%lld&#34;</span>, ans.a, ans.b);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://zjxjwxk.github.io/tags/pat/">PAT</a></li>
      <li><a href="https://zjxjwxk.github.io/tags/%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98/">数学问题</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://zjxjwxk.github.io/">Xinkang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
